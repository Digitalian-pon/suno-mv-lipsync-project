<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸµ Offline Suno Creator Studio</title>
    <meta name="theme-color" content="#667eea">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
            padding: 20px;
        }
        
        .container {
            max-width: 1000px;
            margin: 0 auto;
        }
        
        header {
            text-align: center;
            padding: 30px 0;
            color: white;
        }
        
        h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .subtitle {
            font-size: 1.1em;
            opacity: 0.9;
        }
        
        .main-panel {
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        
        .offline-status {
            background: #d4edda;
            border: 1px solid #c3e6cb;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 20px;
            text-align: center;
            color: #155724;
        }
        
        .generate-section {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .big-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px 40px;
            border-radius: 50px;
            border: none;
            font-size: 18px;
            cursor: pointer;
            transition: transform 0.3s;
            margin: 10px;
        }
        
        .big-btn:hover:not(:disabled) {
            transform: translateY(-3px);
        }
        
        .big-btn:disabled {
            background: #6c757d;
            cursor: not-allowed;
        }
        
        .results-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 20px;
        }
        
        .result-card {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 20px;
            position: relative;
        }
        
        .result-header {
            font-weight: bold;
            color: #667eea;
            margin-bottom: 15px;
            font-size: 1.1em;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .copy-btn {
            background: #28a745;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 12px;
            transition: all 0.3s;
        }
        
        .copy-btn:hover {
            background: #218838;
            transform: scale(1.05);
        }
        
        .result-content {
            background: white;
            padding: 15px;
            border-radius: 10px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            line-height: 1.6;
            white-space: pre-wrap;
            max-height: 300px;
            overflow-y: auto;
        }
        
        .midjourney-controls {
            display: flex;
            gap: 10px;
            margin: 15px 0;
            flex-wrap: wrap;
        }
        
        .control-group {
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .control-group label {
            font-size: 12px;
            color: #666;
        }
        
        .control-group select {
            padding: 5px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 12px;
        }
        
        .loading {
            text-align: center;
            padding: 40px;
            color: #666;
        }
        
        .spinner {
            border: 3px solid #f3f3f3;
            border-top: 3px solid #667eea;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .theme-display {
            background: #e9ecef;
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 20px;
            text-align: center;
        }
        
        .theme-text {
            font-size: 1.2em;
            font-weight: bold;
            color: #495057;
        }
        
        .saved-indicator {
            position: fixed;
            top: 20px;
            right: 20px;
            background: #28a745;
            color: white;
            padding: 10px 20px;
            border-radius: 20px;
            font-size: 14px;
            opacity: 0;
            transition: opacity 0.3s;
            z-index: 1000;
        }
        
        .saved-indicator.show {
            opacity: 1;
        }
        
        .full-width {
            grid-column: 1 / -1;
        }
        
        @media (max-width: 768px) {
            .results-grid {
                grid-template-columns: 1fr;
            }
            h1 { font-size: 2em; }
            .main-panel { padding: 20px; }
        }
        
        .stats {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            display: flex;
            justify-content: space-around;
            text-align: center;
        }
        
        .stat-item {
            flex: 1;
        }
        
        .stat-number {
            font-size: 1.5em;
            font-weight: bold;
            color: #667eea;
        }
        
        .stat-label {
            font-size: 0.9em;
            color: #666;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>ğŸµ Offline Suno Creator Studio</h1>
            <p class="subtitle">å®Œå…¨ã‚ªãƒ•ãƒ©ã‚¤ãƒ³ãƒ»ç„¡é™ãƒãƒªã‚¨ãƒ¼ã‚·ãƒ§ãƒ³æ¥½æ›²ç”Ÿæˆ</p>
        </header>
        
        <div class="main-panel">
            <div class="offline-status">
                âœ… <strong>100% ã‚ªãƒ•ãƒ©ã‚¤ãƒ³å‹•ä½œ</strong> - ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆæ¥ç¶šä¸è¦ãƒ»ã‚¨ãƒ©ãƒ¼ãªã—ä¿è¨¼
            </div>
            
            <div class="stats">
                <div class="stat-item">
                    <div class="stat-number" id="totalGenerations">0</div>
                    <div class="stat-label">ç·ç”Ÿæˆæ•°</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number" id="uniqueThemes">20+</div>
                    <div class="stat-label">ãƒ†ãƒ¼ãƒæ•°</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number">âˆ</div>
                    <div class="stat-label">ãƒãƒªã‚¨ãƒ¼ã‚·ãƒ§ãƒ³</div>
                </div>
            </div>
            
            <div class="generate-section">
                <button class="big-btn" onclick="generateAll()" id="generateBtn">ğŸ² æ¥½æ›²ç”Ÿæˆã‚¹ã‚¿ãƒ¼ãƒˆ</button>
            </div>
            
            <div class="theme-display" id="themeDisplay">
                <div class="theme-text" id="themeText">ğŸ¯ ãƒ¦ãƒ‹ãƒ¼ã‚¯ãªãƒ†ãƒ¼ãƒã‚’ç”Ÿæˆã—ã¾ã™</div>
            </div>
            
            <div class="results-grid" id="resultsGrid">
                <!-- çµæœãŒã“ã“ã«è¡¨ç¤ºã•ã‚Œã¾ã™ -->
            </div>
        </div>
    </div>
    
    <div class="saved-indicator" id="savedIndicator">ğŸ’¾ è‡ªå‹•ä¿å­˜ã•ã‚Œã¾ã—ãŸ</div>

    <script>
        let currentGeneration = null;
        let totalGenerationsCount = parseInt(localStorage.getItem('totalGenerations') || '0');
        
        // æ‹¡å¼µã•ã‚ŒãŸãƒ†ãƒ¼ãƒãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹
        const themes = [
            { concept: "æ™‚ã‚’ã‹ã‘ã‚‹æ‹", keywords: "ã‚¿ã‚¤ãƒ ãƒªãƒ¼ãƒ—, é‹å‘½, åˆ‡ãªã„æ‹, æ™‚é–“, è¨˜æ†¶", genre: "ballad" },
            { concept: "AIå°‘å¥³ã¨ã®æ‹", keywords: "äººå·¥çŸ¥èƒ½, ãƒ‡ã‚¸ã‚¿ãƒ«æ„›, æ„Ÿæƒ…, ç¾å®Ÿã¨ä»®æƒ³, å¿ƒ", genre: "electronic" },
            { concept: "ç•°ä¸–ç•Œã§ã®å¤±æ‹", keywords: "ãƒ•ã‚¡ãƒ³ã‚¿ã‚¸ãƒ¼, é­”æ³•, åˆ¥ã‚Œ, å†’é™º, å¸°é‚„", genre: "epic" },
            { concept: "ãƒ¯ãƒ¼ãƒ—ã—ãŸå…ˆã®å›", keywords: "æ™‚ç©º, ç¬é–“ç§»å‹•, å†ä¼š, è·é›¢, æ„›", genre: "synthwave" },
            { concept: "ãƒ‡ã‚¸ã‚¿ãƒ«ä¸–ç•Œã®ç‰‡æƒ³ã„", keywords: "ãƒ¡ã‚¿ãƒãƒ¼ã‚¹, ã‚¢ãƒã‚¿ãƒ¼, ã‚ªãƒ³ãƒ©ã‚¤ãƒ³, ç¾å®Ÿé€ƒé¿, å­¤ç‹¬", genre: "cyberpop" },
            { concept: "ãƒ«ãƒ¼ãƒ—ã™ã‚‹å‘Šç™½", keywords: "ç„¡é™ãƒ«ãƒ¼ãƒ—, ç¹°ã‚Šè¿”ã—, è«¦ã‚, å¸Œæœ›, é‹å‘½", genre: "indie" },
            { concept: "AIãŒæ­Œã†å¤±æ‹æ­Œ", keywords: "æ©Ÿæ¢°ã®å¿ƒ, å­¦ç¿’, ãƒ‡ãƒ¼ã‚¿, æ„Ÿæƒ…æ¨¡å€£, ç†è§£", genre: "experimental" },
            { concept: "ç•°æ¬¡å…ƒæ‹æ„›äº‹æƒ…", keywords: "ãƒ‘ãƒ©ãƒ¬ãƒ«ãƒ¯ãƒ¼ãƒ«ãƒ‰, åˆ¥ã®è‡ªåˆ†, if, å¯èƒ½æ€§, é¸æŠ", genre: "pop" },
            { concept: "ã‚µã‚¤ãƒãƒ¼ç©ºé–“ã®åˆæ‹", keywords: "ãƒãƒƒãƒˆ, ã‚³ãƒ¼ãƒ‰, ãƒ—ãƒ­ã‚°ãƒ©ãƒ , ãƒãƒ¼ãƒãƒ£ãƒ«, æ¥ç¶š", genre: "techno" },
            { concept: "æ™‚é–“åœæ­¢ä¸­ã®æ‹", keywords: "é™æ­¢, æ°¸é , ç¬é–“, æ™‚ã®æµã‚Œ, ç‰¹åˆ¥", genre: "ambient" },
            { concept: "ãƒ›ãƒ­ã‚°ãƒ©ãƒ ã®æ‹äºº", keywords: "å…‰, å¹»å½±, è§¦ã‚Œã‚‰ã‚Œãªã„, ç¾ã—ã•, å„šã•", genre: "dreampop" },
            { concept: "è¨˜æ†¶ã‚’æ¶ˆã•ã‚ŒãŸæ‹", keywords: "å¿˜å´, æ€ã„å‡º, æ¶ˆå», ç—›ã¿, æ–°ã—ã„å§‹ã¾ã‚Š", genre: "alternative" },
            { concept: "é‡å­ã‚‚ã¤ã‚Œã®æ„›", keywords: "é‡å­ç‰©ç†å­¦, åŒæœŸ, è·é›¢ç„¡é–¢ä¿‚, ç¥ç§˜, ç§‘å­¦", genre: "progressive" },
            { concept: "ãƒãƒ¼ãƒãƒ£ãƒ«çµå©šå¼", keywords: "ä»®æƒ³ç¾å®Ÿ, ã‚»ãƒ¬ãƒ¢ãƒ‹ãƒ¼, ãƒ‡ã‚¸ã‚¿ãƒ«èª“ã„, æœªæ¥, çµ†", genre: "ceremonial" },
            { concept: "ãƒã‚ªãƒ³ãƒ©ã‚¤ãƒˆã®ä¸‹ã§", keywords: "éƒ½å¸‚å¤œæ™¯, å…‰, å‡ºä¼šã„, ç¾ä»£, ãƒ­ãƒãƒ³ã‚¹", genre: "citypop" },
            { concept: "ãƒ¡ã‚¿ãƒãƒ¼ã‚¹ã®ç§˜å¯†", keywords: "éš ã•ã‚ŒãŸçœŸå®Ÿ, æ¢ç´¢, è¬, ç™ºè¦‹, å†’é™º", genre: "mystery" },
            { concept: "ã‚¿ã‚¤ãƒ ãƒ‘ãƒ©ãƒ‰ãƒƒã‚¯ã‚¹æ‹æ„›", keywords: "æ™‚é–“çŸ›ç›¾, å› æœé–¢ä¿‚, è¤‡é›‘, ãƒ‘ã‚ºãƒ«, é‹å‘½", genre: "complex" },
            { concept: "AIã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆã¸ã®æƒ³ã„", keywords: "äººå·¥çŸ¥èƒ½, æ—¥å¸¸, ä¾å­˜, æ„Ÿæƒ…ç§»å…¥, ç¾å®Ÿ", genre: "contemporary" },
            { concept: "ç•°ä¸–ç•Œè»¢ç”Ÿå¾Œã®å†ä¼š", keywords: "è»¢ç”Ÿ, å‰ä¸–, è¨˜æ†¶, é‹å‘½çš„å†ä¼š, ãƒ•ã‚¡ãƒ³ã‚¿ã‚¸ãƒ¼", genre: "fantasy" },
            { concept: "æœªæ¥ã‹ã‚‰ã®æ‰‹ç´™", keywords: "ã‚¿ã‚¤ãƒ ãƒ¡ãƒ¼ãƒ«, äºˆè¨€, è­¦å‘Š, æ„›ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸, SF", genre: "futuristic" }
        ];
        
        const musicStyles = {
            ballad: ["Emotional Ballad", "Piano Ballad", "Acoustic Ballad"],
            electronic: ["Electronic Pop", "Synthpop", "Electro"],
            epic: ["Epic Orchestral", "Cinematic", "Adventure"],
            synthwave: ["Synthwave", "Retrowave", "Outrun"],
            cyberpop: ["Cyberpop", "Digital Pop", "Technopop"],
            indie: ["Indie Pop", "Indie Rock", "Alternative Indie"],
            experimental: ["Experimental Electronic", "Glitch", "IDM"],
            pop: ["Modern Pop", "Mainstream Pop", "Radio Pop"],
            techno: ["Progressive Techno", "Melodic Techno", "Cyber Techno"],
            ambient: ["Ambient Pop", "Atmospheric", "Ethereal"],
            dreampop: ["Dream Pop", "Shoegaze", "Ethereal Pop"],
            alternative: ["Alternative Rock", "Alt Pop", "Modern Alternative"],
            progressive: ["Progressive Electronic", "Art Pop", "Complex Pop"],
            ceremonial: ["Orchestral Pop", "Cinematic Pop", "Grand"],
            citypop: ["City Pop", "Japanese Pop", "Urban"],
            mystery: ["Dark Pop", "Mysterious", "Noir Pop"],
            complex: ["Art Rock", "Progressive Pop", "Intellectual"],
            contemporary: ["Contemporary Pop", "Modern Ballad", "Reflective"],
            fantasy: ["Fantasy Pop", "Magical", "Mystical"],
            futuristic: ["Future Pop", "Sci-Fi Electronic", "Space Pop"]
        };
        
        // é«˜åº¦ãªç”Ÿæˆã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ 
        function generateUniqueTheme() {
            const baseTheme = themes[Math.floor(Math.random() * themes.length)];
            const variations = [
                baseTheme.concept,
                `${baseTheme.concept} 2024`,
                `Neo ${baseTheme.concept}`,
                `Digital ${baseTheme.concept}`,
                `${baseTheme.concept} Reimagined`,
                `Virtual ${baseTheme.concept}`,
                `Cyber ${baseTheme.concept}`,
                `${baseTheme.concept} Protocol`
            ];
            
            const finalConcept = variations[Math.floor(Math.random() * variations.length)];
            
            return {
                ...baseTheme,
                concept: finalConcept,
                variation: Math.floor(Math.random() * 1000000) // ãƒ¦ãƒ‹ãƒ¼ã‚¯ID
            };
        }
        
        function generateUniqueTitle(theme) {
            const prefixes = ["", "Digital ", "Neo ", "Cyber ", "Virtual ", "Electric ", "Neon ", "Quantum "];
            const suffixes = ["", " 2024", " Protocol", " Dreams", " Reality", " Syndrome", " Algorithm", " Paradox"];
            
            const prefix = prefixes[Math.floor(Math.random() * prefixes.length)];
            const suffix = suffixes[Math.floor(Math.random() * suffixes.length)];
            
            const titlePatterns = [
                `${prefix}${theme.concept}${suffix}`,
                `${theme.concept} ${generateRandomWord(['Code', 'Signal', 'Wave', 'Pulse', 'Stream'])}`,
                `${generateRandomWord(['Lost', 'Found', 'Hidden', 'Secret', 'Infinite'])} ${theme.concept}`,
                `${theme.concept}: ${generateRandomWord(['Chapter', 'Episode', 'Version', 'Phase'])} ${Math.floor(Math.random() * 10) + 1}`
            ];
            
            return titlePatterns[Math.floor(Math.random() * titlePatterns.length)];
        }
        
        function generateAdvancedLyrics(theme, language = 'jp') {
            const templates = language === 'jp' ? getJapaneseLyricTemplates(theme) : getEnglishLyricTemplates(theme);
            const template = templates[Math.floor(Math.random() * templates.length)];
            
            return template;
        }
        
        function getJapaneseLyricTemplates(theme) {
            const concepts = theme.keywords.split(', ');
            const concept1 = concepts[0] || 'time';
            const concept2 = concepts[1] || 'love';
            
            return [
                `[Verse 1]
${generateRandomWord(['å¤œ', 'æœ', 'å¤•æ–¹', 'æ·±å¤œ'])}ã®${generateRandomWord(['è¡—è§’', 'çª“è¾º', 'ç©º', 'æµ·'])}ã§
${concept1}ã‚’æƒ³ã†å¿ƒ
${generateRandomWord(['ãƒ‡ã‚¸ã‚¿ãƒ«', 'ãƒãƒ¼ãƒãƒ£ãƒ«', 'ã‚µã‚¤ãƒãƒ¼'])}ãªä¸–ç•Œã®ä¸­ã§
å›ã‚’æ¢ã—ã¦ã„ã‚‹

[Pre-Chorus]
${generateRandomWord(['ãƒ”ã‚¯ã‚»ãƒ«', 'ãƒ‡ãƒ¼ã‚¿', 'ã‚³ãƒ¼ãƒ‰'])}ã«è¾¼ã‚ãŸæƒ³ã„
${generateRandomWord(['ã‚¹ã‚¯ãƒªãƒ¼ãƒ³', 'ãƒ¢ãƒ‹ã‚¿ãƒ¼', 'ãƒ‡ã‚£ã‚¹ãƒ—ãƒ¬ã‚¤'])}è¶Šã—ã®æ„›

[Chorus]
${theme.concept}ãŒå§‹ã¾ã‚‹
${generateRandomWord(['ãƒã‚ªãƒ³', 'ãƒ¬ãƒ¼ã‚¶ãƒ¼', 'ãƒ›ãƒ­ã‚°ãƒ©ãƒ '])}ã®å…‰ã®ä¸­ã§
å›ã¨ã®${generateRandomWord(['ç‰©èª', 'ã‚¹ãƒˆãƒ¼ãƒªãƒ¼', 'é‹å‘½'])}
${concept2}ãŒä»Šã€å‹•ãå‡ºã™

[Verse 2]
${generateRandomWord(['é‡å­', 'ãƒ•ã‚©ãƒˆãƒ³', 'ã‚¨ãƒãƒ«ã‚®ãƒ¼'])}ã‚‚ã¤ã‚ŒãŸå¿ƒã§
${generateRandomWord(['æ™‚ç©º', 'æ¬¡å…ƒ', 'ä¸–ç•Œ'])}ã‚’è¶…ãˆã¦
${concept1}ã ã‘ãŒçœŸå®Ÿ
ã“ã®æƒ³ã„ã¯æœ¬ç‰©

[Chorus]
${theme.concept}ãŒç¶šã
æ°¸é ã®${generateRandomWord(['ãƒ«ãƒ¼ãƒ—', 'ã‚µã‚¤ã‚¯ãƒ«', 'å††ç’°'])}ã®ä¸­ã§
å›ã¨åƒ•ã®${generateRandomWord(['çµ†', 'æ„›', 'ç´„æŸ'])}
${generateRandomWord(['ãƒªã‚¢ãƒ«', 'ç¾å®Ÿ', 'çœŸå®Ÿ'])}ã‚’è¶…ãˆã¦`,

                `[Intro]
${generateRandomWord(['é™å¯‚', 'æ²ˆé»™', 'ç„¡éŸ³'])}ã‚’ç ´ã‚‹${generateRandomWord(['ã‚µã‚¤ãƒ³', 'åˆå›³', 'ä¿¡å·'])}
${concept1}ã‹ã‚‰ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸

[Verse 1]
${generateRandomWord(['å›è·¯', 'ã‚·ã‚¹ãƒ†ãƒ ', 'ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯'])}ã«æµã‚Œã‚‹
å›ã¸ã®æƒ³ã„
${generateRandomWord(['ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ', 'ãƒ—ãƒ­ã‚°ãƒ©ãƒ ', 'ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢'])}ã§ã¯è§£ã‘ãªã„
ã“ã®${concept2}ã®æ–¹ç¨‹å¼

[Bridge]
${generateRandomWord(['ãƒã‚¤ãƒŠãƒª', 'ãƒ˜ã‚­ã‚µ', 'ASCII'])}ã‚³ãƒ¼ãƒ‰ã«åˆ»ã¾ã‚ŒãŸ
æ°¸é ã®èª“ã„
${theme.concept}ã¯
æ™‚ã‚’è¶…ãˆã¦éŸ¿ã

[Chorus]
${generateRandomWord(['ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹', 'ãƒãƒ¼ã‚¿ãƒ«', 'ã‚²ãƒ¼ãƒˆã‚¦ã‚§ã‚¤'])}ã‚’é–‹ã„ã¦
å›ã®å…ƒã¸
${concept1}ã¨${concept2}ãŒ
ä¸€ã¤ã«ãªã‚‹ç¬é–“`
            ];
        }
        
        function getEnglishLyricTemplates(theme) {
            const concepts = theme.keywords.split(', ');
            const concept1 = concepts[0] || 'time';
            const concept2 = concepts[1] || 'love';
            
            return [
                `[Verse 1]
In the ${generateRandomWord(['digital', 'cyber', 'virtual'])} ${generateRandomWord(['maze', 'world', 'space'])} tonight
${generateRandomWord(['Pixels', 'Data', 'Code'])} dancing in the ${generateRandomWord(['neon', 'laser', 'electric'])} light
${concept1} ${generateRandomWord(['bending', 'flowing', 'streaming'])} through the cyber space
Your ${generateRandomWord(['holographic', 'digital', 'virtual'])} ${generateRandomWord(['smile', 'face', 'eyes'])}, I can't replace

[Pre-Chorus]
Streaming ${generateRandomWord(['data', 'love', 'dreams'])} through my neural core
${concept2} ${generateRandomWord(['uploading', 'downloading', 'processing'])} like never before

[Chorus]
${theme.concept} in the metaverse
Breaking through the digital curse
We're ${generateRandomWord(['glitching', 'syncing', 'connecting'])} in and out of time
Your love's the only perfect ${generateRandomWord(['rhyme', 'line', 'sign'])}

[Verse 2]
${generateRandomWord(['Binary', 'Quantum', 'Electric'])} ${generateRandomWord(['dreams', 'hearts', 'souls'])} and cosmic highs
See the ${generateRandomWord(['future', 'truth', 'light'])} in your ${generateRandomWord(['android', 'cyber', 'digital'])} eyes
${generateRandomWord(['Latency', 'Distance', 'Space'])} can't slow us down
We're the ${generateRandomWord(['kings', 'queens', 'rulers'])} of this digital town

[Chorus]
${theme.concept} never fades
In these ${generateRandomWord(['electric', 'cyber', 'digital'])} serenades
${generateRandomWord(['Quantum', 'Digital', 'Virtual'])} hearts that beat as one
In this ${generateRandomWord(['cyber', 'virtual', 'digital'])} world we run`,

                `[Intro]
${generateRandomWord(['Connection', 'Signal', 'Transmission'])} established
${concept1} ${generateRandomWord(['protocol', 'sequence', 'algorithm'])} initiated

[Verse 1]
Lost in the ${generateRandomWord(['matrix', 'network', 'grid'])} of ${concept2}
${generateRandomWord(['Searching', 'Looking', 'Hunting'])} for the ${generateRandomWord(['code', 'key', 'password'])} to your heart
${generateRandomWord(['Virtual', 'Digital', 'Cyber'])} reality feels so real
When you're the ${generateRandomWord(['algorithm', 'program', 'system'])} I can feel

[Bridge]
Sometimes the server crashes down
But we'll always come around
Backup saved in ${generateRandomWord(['cloud', 'memory', 'cache'])} nine
Forever you'll be mine

[Final Chorus]
${theme.concept} ${generateRandomWord(['transcending', 'breaking', 'crossing'])} space
In this virtual reality place
We're more than ${generateRandomWord(['ones', 'zeros', 'data'])} and ${generateRandomWord(['zeros', 'code', 'bytes'])} now
We're real somehow`
            ];
        }
        
        function generateStylePrompt(theme) {
            const styles = musicStyles[theme.genre] || ['Electronic Pop'];
            const style = styles[Math.floor(Math.random() * styles.length)];
            
            const tempos = ['110-120 BPM', '120-130 BPM', '130-140 BPM', '100-110 BPM'];
            const keys = ['C Major', 'A Minor', 'G Major', 'F Major', 'D Minor', 'E Minor'];
            const moods = ['emotional', 'dreamy', 'energetic', 'melancholic', 'uplifting', 'nostalgic'];
            
            const tempo = tempos[Math.floor(Math.random() * tempos.length)];
            const key = keys[Math.floor(Math.random() * keys.length)];
            const mood = moods[Math.floor(Math.random() * moods.length)];
            
            const instruments = [
                ['Synthesizers', 'Digital piano', 'Soft drums'],
                ['Electric guitar', 'Bass synth', 'Electronic beats'],
                ['Orchestral strings', 'Piano', 'Ambient pads'],
                ['Vocal chops', 'Arpeggiated synths', '808 drums']
            ];
            
            const instrumentSet = instruments[Math.floor(Math.random() * instruments.length)];
            
            return `Style: ${style}
Mood: ${mood} and emotionally engaging
Tempo: ${tempo}
Key: ${key}
Instruments: ${instrumentSet.join(', ')}
Vocal Style: ${generateRandomWord(['Intimate', 'Powerful', 'Dreamy', 'Emotional'])} with ${generateRandomWord(['subtle autotune', 'natural reverb', 'layered harmonies'])}
Production: ${generateRandomWord(['Clean modern mix', 'Lo-fi aesthetic', 'Polished production'])} with ${generateRandomWord(['spatial effects', 'ambient reverb', 'stereo imaging'])}
Structure: Verse-Chorus-Verse-Chorus-Bridge-Final Chorus
Special Elements: ${generateRandomWord(['Glitch effects', 'Vinyl warmth', 'Digital artifacts'])} during transitions
Theme: ${theme.concept}
Genre: ${theme.genre}
Length: ~3 minutes`;
        }
        
        function generateMidjourneyPrompt(theme) {
            const visualStyles = [
                'cyberpunk aesthetic with neon colors',
                'synthwave landscape with retro-futuristic vibes',
                'digital art style with holographic elements',
                'anime style with cyber romance theme',
                'vaporwave aesthetic with pastel gradients',
                'futuristic cityscape with floating elements',
                'abstract digital art with geometric patterns',
                'neo-noir atmosphere with dramatic lighting'
            ];
            
            const colors = [
                'electric blue and hot pink',
                'purple and cyan gradients',
                'neon green and magenta',
                'golden yellow and deep blue',
                'holographic rainbow spectrum',
                'warm orange and cool teal'
            ];
            
            const elements = [
                'floating geometric shapes',
                'digital particle effects',
                'glowing circuit patterns',
                'holographic interfaces',
                'light streaks and rays',
                'crystalline structures'
            ];
            
            const style = visualStyles[Math.floor(Math.random() * visualStyles.length)];
            const color = colors[Math.floor(Math.random() * colors.length)];
            const element = elements[Math.floor(Math.random() * elements.length)];
            
            return `${style}, ${theme.concept} theme, ${color}, ${element}, emotional atmosphere, cinematic composition, high detail, 4K quality, trending on artstation, digital art masterpiece, romantic mood`;
        }
        
        function generateRandomWord(array) {
            return array[Math.floor(Math.random() * array.length)];
        }
        
        // ãƒ¡ã‚¤ãƒ³ç”Ÿæˆé–¢æ•°
        async function generateAll() {
            const btn = document.getElementById('generateBtn');
            btn.disabled = true;
            btn.textContent = 'ğŸµ ç”Ÿæˆä¸­...';
            
            try {
                const theme = generateUniqueTheme();
                document.getElementById('themeText').textContent = `ğŸ¯ ${theme.concept} (${theme.keywords})`;
                
                const resultsGrid = document.getElementById('resultsGrid');
                resultsGrid.innerHTML = '<div class="loading full-width"><div class="spinner"></div>ãƒ¦ãƒ‹ãƒ¼ã‚¯ãªæ¥½æ›²ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’ç”Ÿæˆä¸­...</div>';
                
                // ç”Ÿæˆé…å»¶ã‚’ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ãƒˆ
                await new Promise(resolve => setTimeout(resolve, 1500));
                
                const generation = {
                    title: generateUniqueTitle(theme),
                    lyricsJP: generateAdvancedLyrics(theme, 'jp'),
                    lyricsEN: generateAdvancedLyrics(theme, 'en'),
                    stylePrompt: generateStylePrompt(theme),
                    midjourneyPrompt: generateMidjourneyPrompt(theme),
                    aspectRatio: "1:1",
                    model: "v7",
                    theme: theme,
                    timestamp: new Date().toLocaleString('ja-JP'),
                    id: Date.now()
                };
                
                currentGeneration = generation;
                displayResults(generation);
                saveToHistory(generation);
                updateStats();
                showSavedIndicator();
                
            } catch (error) {
                console.error('ç”Ÿæˆã‚¨ãƒ©ãƒ¼:', error);
                document.getElementById('resultsGrid').innerHTML = `
                    <div class="error full-width">
                        âŒ ç”Ÿæˆã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚ãƒšãƒ¼ã‚¸ã‚’å†èª­ã¿è¾¼ã¿ã—ã¦å†è©¦è¡Œã—ã¦ãã ã•ã„ã€‚
                    </div>
                `;
            } finally {
                btn.disabled = false;
                btn.textContent = 'ğŸ² æ¥½æ›²ç”Ÿæˆã‚¹ã‚¿ãƒ¼ãƒˆ';
            }
        }
        
        function displayResults(generation) {
            const grid = document.getElementById('resultsGrid');
            const initialModel = generation.model === 'v7' ? 'v 7' : generation.model === 'niji6' ? 'niji 6' : 'v 7';
            
            grid.innerHTML = `
                <div class="result-card">
                    <div class="result-header">
                        ğŸµ æ¥½æ›²ã‚¿ã‚¤ãƒˆãƒ«
                        <button class="copy-btn" onclick="copyToClipboard('title')">ğŸ“‹ ã‚³ãƒ”ãƒ¼</button>
                    </div>
                    <div class="result-content">${generation.title}</div>
                </div>
                
                <div class="result-card">
                    <div class="result-header">
                        ğŸŒ æ—¥æœ¬èªæ­Œè©
                        <button class="copy-btn" onclick="copyToClipboard('lyricsJP')">ğŸ“‹ ã‚³ãƒ”ãƒ¼</button>
                    </div>
                    <div class="result-content">${generation.lyricsJP}</div>
                </div>
                
                <div class="result-card">
                    <div class="result-header">
                        ğŸ‡ºğŸ‡¸ è‹±èªæ­Œè©
                        <button class="copy-btn" onclick="copyToClipboard('lyricsEN')">ğŸ“‹ ã‚³ãƒ”ãƒ¼</button>
                    </div>
                    <div class="result-content">${generation.lyricsEN}</div>
                </div>
                
                <div class="result-card">
                    <div class="result-header">
                        ğŸ¨ Sunoã‚¹ã‚¿ã‚¤ãƒ«ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ
                        <button class="copy-btn" onclick="copyToClipboard('stylePrompt')">ğŸ“‹ ã‚³ãƒ”ãƒ¼</button>
                    </div>
                    <div class="result-content">${generation.stylePrompt}</div>
                </div>
                
                <div class="result-card full-width">
                    <div class="result-header">
                        ğŸ–¼ï¸ Midjourneyç”»åƒãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ
                        <button class="copy-btn" onclick="copyToClipboard('midjourneyPrompt')">ğŸ“‹ ã‚³ãƒ”ãƒ¼</button>
                    </div>
                    <div class="midjourney-controls">
                        <div class="control-group">
                            <label>æ¯”ç‡:</label>
                            <select id="aspectRatio" onchange="updateMidjourneyPrompt()">
                                <option value="1:1">1:1 (æ­£æ–¹å½¢)</option>
                                <option value="9:16">9:16 (ç¸¦é•·)</option>
                                <option value="16:9">16:9 (æ¨ªé•·)</option>
                            </select>
                        </div>
                        <div class="control-group">
                            <label>ãƒ¢ãƒ‡ãƒ«:</label>
                            <select id="mjModel" onchange="updateMidjourneyPrompt()">
                                <option value="v7">v7</option>
                                <option value="niji6">niji6</option>
                            </select>
                        </div>
                    </div>
                    <div class="result-content" id="midjourneyPromptContent">${generation.midjourneyPrompt} --ar 1:1 --${initialModel}</div>
                </div>
            `;
        }
        
        function updateMidjourneyPrompt() {
            if (!currentGeneration) return;
            
            const aspectRatio = document.getElementById('aspectRatio').value;
            const model = document.getElementById('mjModel').value;
            const basePrompt = currentGeneration.midjourneyPrompt;
            
            const formattedModel = model === 'v7' ? 'v 7' : model === 'niji6' ? 'niji 6' : model;
            const updatedPrompt = `${basePrompt} --ar ${aspectRatio} --${formattedModel}`;
            document.getElementById('midjourneyPromptContent').textContent = updatedPrompt;
        }
        
        function copyToClipboard(type) {
            if (!currentGeneration) return;
            
            let text = '';
            switch(type) {
                case 'title':
                    text = currentGeneration.title;
                    break;
                case 'lyricsJP':
                    text = currentGeneration.lyricsJP;
                    break;
                case 'lyricsEN':
                    text = currentGeneration.lyricsEN;
                    break;
                case 'stylePrompt':
                    text = currentGeneration.stylePrompt;
                    break;
                case 'midjourneyPrompt':
                    const aspectRatio = document.getElementById('aspectRatio')?.value || '1:1';
                    const model = document.getElementById('mjModel')?.value || 'v7';
                    const formattedModel = model === 'v7' ? 'v 7' : model === 'niji6' ? 'niji 6' : model;
                    text = `${currentGeneration.midjourneyPrompt} --ar ${aspectRatio} --${formattedModel}`;
                    break;
            }
            
            navigator.clipboard.writeText(text).then(() => {
                showMessage('ğŸ“‹ ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸï¼');
            }).catch(() => {
                const textArea = document.createElement('textarea');
                textArea.value = text;
                document.body.appendChild(textArea);
                textArea.select();
                document.execCommand('copy');
                document.body.removeChild(textArea);
                showMessage('ğŸ“‹ ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸï¼');
            });
        }
        
        function showMessage(message) {
            const indicator = document.getElementById('savedIndicator');
            indicator.textContent = message;
            indicator.classList.add('show');
            setTimeout(() => {
                indicator.classList.remove('show');
            }, 2000);
        }
        
        function showSavedIndicator() {
            const indicator = document.getElementById('savedIndicator');
            indicator.textContent = 'ğŸ’¾ è‡ªå‹•ä¿å­˜ã•ã‚Œã¾ã—ãŸ';
            indicator.classList.add('show');
            setTimeout(() => {
                indicator.classList.remove('show');
            }, 2000);
        }
        
        function saveToHistory(generation) {
            let history = JSON.parse(localStorage.getItem('offlineSunoHistory') || '[]');
            history.unshift(generation);
            history = history.slice(0, 20); // æœ€æ–°20ä»¶ä¿æŒ
            localStorage.setItem('offlineSunoHistory', JSON.stringify(history));
            
            // ç·ç”Ÿæˆæ•°ã‚’æ›´æ–°
            totalGenerationsCount++;
            localStorage.setItem('totalGenerations', totalGenerationsCount.toString());
        }
        
        function updateStats() {
            document.getElementById('totalGenerations').textContent = totalGenerationsCount;
        }
        
        // åˆæœŸåŒ–
        window.addEventListener('load', () => {
            updateStats();
            
            // å‰å›ã®ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚Œã°å¾©å…ƒ
            const lastGeneration = localStorage.getItem('lastGeneration');
            if (lastGeneration) {
                try {
                    currentGeneration = JSON.parse(lastGeneration);
                    if (currentGeneration.theme) {
                        document.getElementById('themeText').textContent = `ğŸ¯ ${currentGeneration.theme.concept} (${currentGeneration.theme.keywords})`;
                        displayResults(currentGeneration);
                    }
                } catch (e) {
                    console.log('å‰å›ãƒ‡ãƒ¼ã‚¿ã®å¾©å…ƒã«å¤±æ•—');
                }
            }
        });
        
        // ãƒšãƒ¼ã‚¸é›¢è„±æ™‚ã«ä¿å­˜
        window.addEventListener('beforeunload', () => {
            if (currentGeneration) {
                localStorage.setItem('lastGeneration', JSON.stringify(currentGeneration));
            }
        });
    </script>
</body>
</html>