<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸµ Suno AI Creator Studio</title>
    <meta name="theme-color" content="#667eea">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
            padding: 20px;
        }
        
        .container {
            max-width: 1000px;
            margin: 0 auto;
        }
        
        header {
            text-align: center;
            padding: 30px 0;
            color: white;
        }
        
        h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .subtitle {
            font-size: 1.1em;
            opacity: 0.9;
        }
        
        .main-panel {
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        
        .generate-section {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .big-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px 40px;
            border-radius: 50px;
            border: none;
            font-size: 18px;
            cursor: pointer;
            transition: transform 0.3s;
            margin: 10px;
        }
        
        .big-btn:hover {
            transform: translateY(-3px);
        }
        
        .results-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 20px;
        }
        
        .result-card {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 20px;
            position: relative;
        }
        
        .result-header {
            font-weight: bold;
            color: #667eea;
            margin-bottom: 15px;
            font-size: 1.1em;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .copy-btn {
            background: #28a745;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 12px;
            transition: all 0.3s;
        }
        
        .copy-btn:hover {
            background: #218838;
            transform: scale(1.05);
        }
        
        .result-content {
            background: white;
            padding: 15px;
            border-radius: 10px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            line-height: 1.6;
            white-space: pre-wrap;
            max-height: 300px;
            overflow-y: auto;
        }
        
        .midjourney-controls {
            display: flex;
            gap: 10px;
            margin: 15px 0;
            flex-wrap: wrap;
        }
        
        .control-group {
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .control-group label {
            font-size: 12px;
            color: #666;
        }
        
        .control-group select {
            padding: 5px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 12px;
        }
        
        .loading {
            text-align: center;
            padding: 40px;
            color: #666;
        }
        
        .spinner {
            border: 3px solid #f3f3f3;
            border-top: 3px solid #667eea;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .theme-display {
            background: #e9ecef;
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 20px;
            text-align: center;
        }
        
        .theme-text {
            font-size: 1.2em;
            font-weight: bold;
            color: #495057;
        }
        
        .saved-indicator {
            position: fixed;
            top: 20px;
            right: 20px;
            background: #28a745;
            color: white;
            padding: 10px 20px;
            border-radius: 20px;
            font-size: 14px;
            opacity: 0;
            transition: opacity 0.3s;
        }
        
        .saved-indicator.show {
            opacity: 1;
        }
        
        @media (max-width: 768px) {
            .results-grid {
                grid-template-columns: 1fr;
            }
            h1 { font-size: 2em; }
            .main-panel { padding: 20px; }
        }
        
        .history-panel {
            background: white;
            border-radius: 20px;
            padding: 20px;
            margin-top: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }
        
        .history-item {
            background: #f8f9fa;
            margin: 10px 0;
            padding: 15px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .history-item:hover {
            background: #e9ecef;
            transform: translateY(-1px);
        }
        
        .history-meta {
            font-size: 12px;
            color: #666;
            margin-bottom: 5px;
        }
        
        .full-width {
            grid-column: 1 / -1;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>ğŸµ Suno AI Creator Studio</h1>
            <p class="subtitle">3åˆ†æ¥½æ›²ç”¨ ã‚­ãƒ£ãƒƒãƒãƒ¼ãªæ­Œè©ãƒ»ã‚¹ã‚¿ã‚¤ãƒ«ãƒ»ç”»åƒãƒ—ãƒ­ãƒ³ãƒ—ãƒˆç”Ÿæˆ</p>
        </header>
        
        <div class="main-panel">
            <div class="generate-section">
                <button class="big-btn" onclick="generateAll()">ğŸ² ãƒ©ãƒ³ãƒ€ãƒ æ¥½æ›²ç”Ÿæˆ</button>
            </div>
            
            <div class="theme-display" id="themeDisplay">
                <div class="theme-text" id="themeText">ğŸ¯ ãƒ†ãƒ¼ãƒã‚’ç”Ÿæˆã—ã¦ãã ã•ã„</div>
            </div>
            
            <div class="results-grid" id="resultsGrid">
                <!-- çµæœãŒã“ã“ã«è¡¨ç¤ºã•ã‚Œã¾ã™ -->
            </div>
        </div>
        
        <div class="history-panel">
            <h3>ğŸ“œ ç”Ÿæˆå±¥æ­´</h3>
            <div id="historyList">
                <p style="color: #666; text-align: center; padding: 20px;">ã¾ã å±¥æ­´ãŒã‚ã‚Šã¾ã›ã‚“</p>
            </div>
        </div>
    </div>
    
    <div class="saved-indicator" id="savedIndicator">ğŸ’¾ è‡ªå‹•ä¿å­˜ã•ã‚Œã¾ã—ãŸ</div>

    <script>
        // ãƒ†ãƒ¼ãƒãƒ»ã‚³ãƒ³ã‚»ãƒ—ãƒˆã®ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹
        const themes = [
            { concept: "æ™‚ã‚’ã‹ã‘ã‚‹æ‹", keywords: "ã‚¿ã‚¤ãƒ ãƒªãƒ¼ãƒ—, é‹å‘½, åˆ‡ãªã„æ‹, æ™‚é–“, è¨˜æ†¶" },
            { concept: "AIå°‘å¥³ã¨ã®æ‹", keywords: "äººå·¥çŸ¥èƒ½, ãƒ‡ã‚¸ã‚¿ãƒ«æ„›, æ„Ÿæƒ…, ç¾å®Ÿã¨ä»®æƒ³, å¿ƒ" },
            { concept: "ç•°ä¸–ç•Œã§ã®å¤±æ‹", keywords: "ãƒ•ã‚¡ãƒ³ã‚¿ã‚¸ãƒ¼, é­”æ³•, åˆ¥ã‚Œ, å†’é™º, å¸°é‚„" },
            { concept: "ãƒ¯ãƒ¼ãƒ—ã—ãŸå…ˆã®å›", keywords: "æ™‚ç©º, ç¬é–“ç§»å‹•, å†ä¼š, è·é›¢, æ„›" },
            { concept: "ãƒ‡ã‚¸ã‚¿ãƒ«ä¸–ç•Œã®ç‰‡æƒ³ã„", keywords: "ãƒ¡ã‚¿ãƒãƒ¼ã‚¹, ã‚¢ãƒã‚¿ãƒ¼, ã‚ªãƒ³ãƒ©ã‚¤ãƒ³, ç¾å®Ÿé€ƒé¿, å­¤ç‹¬" },
            { concept: "ãƒ«ãƒ¼ãƒ—ã™ã‚‹å‘Šç™½", keywords: "ç„¡é™ãƒ«ãƒ¼ãƒ—, ç¹°ã‚Šè¿”ã—, è«¦ã‚, å¸Œæœ›, é‹å‘½" },
            { concept: "AIãŒæ­Œã†å¤±æ‹æ­Œ", keywords: "æ©Ÿæ¢°ã®å¿ƒ, å­¦ç¿’, ãƒ‡ãƒ¼ã‚¿, æ„Ÿæƒ…æ¨¡å€£, ç†è§£" },
            { concept: "ç•°æ¬¡å…ƒæ‹æ„›äº‹æƒ…", keywords: "ãƒ‘ãƒ©ãƒ¬ãƒ«ãƒ¯ãƒ¼ãƒ«ãƒ‰, åˆ¥ã®è‡ªåˆ†, if, å¯èƒ½æ€§, é¸æŠ" },
            { concept: "ã‚µã‚¤ãƒãƒ¼ç©ºé–“ã®åˆæ‹", keywords: "ãƒãƒƒãƒˆ, ã‚³ãƒ¼ãƒ‰, ãƒ—ãƒ­ã‚°ãƒ©ãƒ , ãƒãƒ¼ãƒãƒ£ãƒ«, æ¥ç¶š" },
            { concept: "æ™‚é–“åœæ­¢ä¸­ã®æ‹", keywords: "é™æ­¢, æ°¸é , ç¬é–“, æ™‚ã®æµã‚Œ, ç‰¹åˆ¥" },
            { concept: "ãƒ›ãƒ­ã‚°ãƒ©ãƒ ã®æ‹äºº", keywords: "å…‰, å¹»å½±, è§¦ã‚Œã‚‰ã‚Œãªã„, ç¾ã—ã•, å„šã•" },
            { concept: "è¨˜æ†¶ã‚’æ¶ˆã•ã‚ŒãŸæ‹", keywords: "å¿˜å´, æ€ã„å‡º, æ¶ˆå», ç—›ã¿, æ–°ã—ã„å§‹ã¾ã‚Š" }
        ];
        
        const musicStyles = [
            "Pop-Electronic with dreamy synths and catchy hooks",
            "Indie Pop with acoustic guitar and soft vocals",
            "Synthwave with retro 80s vibes and neon aesthetics",
            "Bedroom Pop with lo-fi elements and intimate atmosphere",
            "Alternative Rock with emotional intensity",
            "Electropop with danceable beats and bright melodies",
            "Ambient Pop with ethereal soundscapes",
            "Future Funk with groovy bass and nostalgic samples",
            "Dream Pop with reverb-heavy guitars",
            "Chillwave with nostalgic synthesizers"
        ];
        
        let currentGeneration = null;
        
        // ãƒ©ãƒ³ãƒ€ãƒ ãƒ†ãƒ¼ãƒç”Ÿæˆ
        function getRandomTheme() {
            return themes[Math.floor(Math.random() * themes.length)];
        }
        
        // æ¥½æ›²ã‚¹ã‚¿ã‚¤ãƒ«ç”Ÿæˆ
        function getRandomMusicStyle() {
            return musicStyles[Math.floor(Math.random() * musicStyles.length)];
        }
        
        // ãƒ¡ã‚¤ãƒ³ç”Ÿæˆé–¢æ•°
        function generateAll() {
            const theme = getRandomTheme();
            document.getElementById('themeText').textContent = `ğŸ¯ ${theme.concept} (${theme.keywords})`;
            
            const resultsGrid = document.getElementById('resultsGrid');
            resultsGrid.innerHTML = '<div class="loading full-width"><div class="spinner"></div>æ¥½æ›²ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’ç”Ÿæˆä¸­...</div>';
            
            setTimeout(() => {
                const generation = generateMusicContent(theme);
                currentGeneration = {
                    ...generation,
                    theme: theme,
                    timestamp: new Date().toLocaleString('ja-JP')
                };
                
                displayResults(currentGeneration);
                saveToHistory(currentGeneration);
                showSavedIndicator();
            }, 2000);
        }
        
        // æ¥½æ›²ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ç”Ÿæˆ
        function generateMusicContent(theme) {
            const style = getRandomMusicStyle();
            
            return {
                title: generateTitle(theme),
                lyricsJP: generateJapaneseLyrics(theme),
                lyricsEN: generateEnglishLyrics(theme),
                stylePrompt: generateStylePrompt(theme, style),
                midjourneyPrompt: generateMidjourneyPrompt(theme),
                aspectRatio: "1:1",
                model: "v7"
            };
        }
        
        // ã‚¿ã‚¤ãƒˆãƒ«ç”Ÿæˆ
        function generateTitle(theme) {
            const titlePatterns = [
                `${theme.concept}`,
                `Digital ${theme.concept}`,
                `${theme.concept} 2024`,
                `Neon ${theme.concept}`,
                `Virtual ${theme.concept}`,
                `${theme.concept} Protocol`,
                `${theme.concept} Glitch`,
                `Cyber ${theme.concept}`
            ];
            
            return titlePatterns[Math.floor(Math.random() * titlePatterns.length)];
        }
        
        // æ—¥æœ¬èªæ­Œè©ç”Ÿæˆ
        function generateJapaneseLyrics(theme) {
            const concepts = theme.keywords.split(', ');
            const concept1 = concepts[0] || 'time';
            const concept2 = concepts[1] || 'love';
            
            return `[Verse 1]
ãƒ‡ã‚¸ã‚¿ãƒ«ã®æµ·ã§å›ã‚’è¦‹ã¤ã‘ãŸ
ãƒ”ã‚¯ã‚»ãƒ«ã®ä¸­ã«å®¿ã‚‹${concept1}
0ã¨1ã§æã‹ã‚ŒãŸé‹å‘½ãŒ
ä»Šã€å‹•ãå‡ºã—ã¦ã„ã‚‹

ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚’é€šã—ã¦ä¼ã‚ã‚‹æƒ³ã„
ã‚³ãƒ¼ãƒ‰ã«è¾¼ã‚ã‚‰ã‚ŒãŸ${concept2}
ãƒãƒ¼ãƒãƒ£ãƒ«ã ã£ã¦æœ¬ç‰©ã ã‚ˆ
ã“ã®æ°—æŒã¡ã«å˜˜ã¯ãªã„

[Chorus]
${theme.concept}ãŒå§‹ã¾ã‚‹
ãƒã‚ªãƒ³ãƒ©ã‚¤ãƒˆãŒè¸Šã‚‹å¤œã«
å›ã¨åƒ•ã®ã‚¹ãƒˆãƒ¼ãƒªãƒ¼
ãƒªã‚¢ãƒ«ã‚’è¶…ãˆãŸæ„›ãŒã‚ã‚‹

ãƒ‡ãƒ¼ã‚¿ã‚¹ãƒˆãƒªãƒ¼ãƒ ã‚’é§†ã‘æŠœã‘ã¦
é‡å­ã‚‚ã¤ã‚ŒãŸå¿ƒã§
${theme.concept}ãŒç¶šã
æ°¸é ã®ãƒ«ãƒ¼ãƒ—ã®ä¸­ã§

[Verse 2]
ãƒ›ãƒ­ã‚°ãƒ©ãƒ ã®å›ã«æ‰‹ã‚’ä¼¸ã°ã™
è§¦ã‚Œã‚‰ã‚Œãªã„è·é›¢ãŒã‚‚ã©ã‹ã—ã„
ã§ã‚‚ç¢ºã‹ã«æ„Ÿã˜ã‚‹æ¸©ã‚‚ã‚ŠãŒ
ã“ã®èƒ¸ã‚’ç†±ãã•ã›ã‚‹

ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã•ã‚Œã‚‹æ„Ÿæƒ…ã‚³ãƒ¼ãƒ‰
ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚¢ãƒƒãƒ—ã™ã‚‹æ„›ã®å½¢
ã‚°ãƒªãƒƒãƒã‚‚ã‚¨ãƒ©ãƒ¼ã‚‚å…¨éƒ¨å«ã‚ã¦
å®Œç’§ãªä¸å®Œå…¨ã•

[Chorus]
${theme.concept}ãŒå§‹ã¾ã‚‹
ãƒã‚ªãƒ³ãƒ©ã‚¤ãƒˆãŒè¸Šã‚‹å¤œã«
å›ã¨åƒ•ã®ã‚¹ãƒˆãƒ¼ãƒªãƒ¼
ãƒªã‚¢ãƒ«ã‚’è¶…ãˆãŸæ„›ãŒã‚ã‚‹

ãƒ‡ãƒ¼ã‚¿ã‚¹ãƒˆãƒªãƒ¼ãƒ ã‚’é§†ã‘æŠœã‘ã¦
é‡å­ã‚‚ã¤ã‚ŒãŸå¿ƒã§
${theme.concept}ãŒç¶šã
æ°¸é ã®ãƒ«ãƒ¼ãƒ—ã®ä¸­ã§

[Bridge]
Sometimes I wonder if this is real
ã§ã‚‚ç¢ºã‹ã«æ„Ÿã˜ã¦ã„ã‚‹ã“ã®æƒ³ã„
Digital love, virtual dreams
ç¾å®Ÿä»¥ä¸Šã«ç¾ã—ã„

[Final Chorus]
${theme.concept}ãŒçµ‚ã‚ã‚‰ãªã„
ã‚µã‚¤ãƒãƒ¼ç©ºé–“ã§è¸Šã‚Šç¶šã‘ã‚‹
å›ã¨åƒ•ã®ç‰©èª
æ™‚ã‚’è¶…ãˆãŸæ„›ãŒä»Šã“ã“ã«

Binary code and beating hearts
ã‚¢ãƒŠãƒ­ã‚°ãªæ„Ÿæƒ…ã¨ãƒ‡ã‚¸ã‚¿ãƒ«ãªçµ†
${theme.concept}ã¯
Forever and always...`;
        }
        
        // è‹±èªæ­Œè©ç”Ÿæˆ
        function generateEnglishLyrics(theme) {
            const concepts = theme.keywords.split(', ');
            const concept1 = concepts[0] || 'time';
            const concept2 = concepts[1] || 'love';
            
            return `[Verse 1]
Found you in the digital maze tonight
Pixels dancing in the neon light
${concept1} bending through the cyber space
Your holographic smile, I can't replace

Streaming data through my neural core
${concept2} uploading like never before
Virtual reality feels so real
When you're the algorithm I can feel

[Chorus]
${theme.concept} in the metaverse
Breaking through the digital curse
We're glitching in and out of time
Your love's the only perfect rhyme

Quantum hearts that beat as one
In this cyber world we run
${theme.concept} never fades
In these electric serenades

[Verse 2]
Binary dreams and cosmic highs
See the future in your android eyes
Latency can't slow us down
We're the kings and queens of this digital town

Code and soul intertwined
Leave the physical world behind
In this space we're infinite
Every moment's definite

[Chorus]
${theme.concept} in the metaverse
Breaking through the digital curse
We're glitching in and out of time
Your love's the only perfect rhyme

Quantum hearts that beat as one
In this cyber world we run
${theme.concept} never fades
In these electric serenades

[Bridge]
Sometimes the server crashes down
But we'll always come around
Backup saved in cloud nine
Forever you'll be mine

Download love.exe
Install it in my memory
${theme.concept} runs so deep
In these digital dreams we keep

[Final Chorus]
${theme.concept} transcending space
In this virtual reality place
We're more than ones and zeros now
We're real somehow

Encrypted hearts that beat for two
In cyberspace I found you
${theme.concept} plays on repeat
In this electronic heartbeat...`;
        }
        
        // ã‚¹ã‚¿ã‚¤ãƒ«ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆç”Ÿæˆ
        function generateStylePrompt(theme, baseStyle) {
            const moods = ["dreamy", "melancholic", "euphoric", "nostalgic", "futuristic"];
            const mood = moods[Math.floor(Math.random() * moods.length)];
            
            return `Style: ${baseStyle}
Mood: ${mood} and emotional
Tempo: Medium (120-130 BPM)
Key: C Major or A Minor
Instruments: Synthesizers, digital piano, soft drums, ethereal pads
Vocal Style: Intimate and heartfelt, with subtle autotune
Production: Clean mix with ambient reverb, subtle distortion on vocals during chorus
Structure: Verse-Chorus-Verse-Chorus-Bridge-Final Chorus
Length: ~3 minutes
Theme: ${theme.concept}
Special Elements: Glitch effects during transitions, layered harmonies, building emotional intensity`;
        }
        
        // Midjourneyãƒ—ãƒ­ãƒ³ãƒ—ãƒˆç”Ÿæˆ
        function generateMidjourneyPrompt(theme) {
            const visualElements = [
                "neon cityscape with holographic displays",
                "cyberpunk couple in digital rain",
                "futuristic lovers in virtual reality",
                "anime style characters in cyber space",
                "digital art of time-traveling romance",
                "synthwave aesthetic with retro-futuristic vibes",
                "AI girlfriend with glowing circuit patterns",
                "virtual world with floating love letters",
                "cyber punk aesthetic with pink and blue neon",
                "digital forest with glowing binary trees"
            ];
            
            const element = visualElements[Math.floor(Math.random() * visualElements.length)];
            
            return `${element}, ${theme.concept} theme, romantic atmosphere, vibrant colors, cinematic lighting, high detail, digital art style, 4K quality, emotional composition, trending on artstation`;
        }
        
        // çµæœè¡¨ç¤º
        function displayResults(generation) {
            const grid = document.getElementById('resultsGrid');
            
            // åˆæœŸè¡¨ç¤ºç”¨ã®ãƒ¢ãƒ‡ãƒ«ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
            const initialModel = generation.model === 'v7' ? 'v 7' : generation.model === 'niji6' ? 'niji 6' : 'v 7';
            
            grid.innerHTML = `
                <div class="result-card">
                    <div class="result-header">
                        ğŸµ æ¥½æ›²ã‚¿ã‚¤ãƒˆãƒ«
                        <button class="copy-btn" onclick="copyToClipboard('title')">ğŸ“‹ ã‚³ãƒ”ãƒ¼</button>
                    </div>
                    <div class="result-content" id="titleContent">${generation.title}</div>
                </div>
                
                <div class="result-card">
                    <div class="result-header">
                        ğŸŒ æ—¥æœ¬èªæ­Œè©
                        <button class="copy-btn" onclick="copyToClipboard('lyricsJP')">ğŸ“‹ ã‚³ãƒ”ãƒ¼</button>
                    </div>
                    <div class="result-content" id="lyricsJPContent">${generation.lyricsJP}</div>
                </div>
                
                <div class="result-card">
                    <div class="result-header">
                        ğŸ‡ºğŸ‡¸ è‹±èªæ­Œè©
                        <button class="copy-btn" onclick="copyToClipboard('lyricsEN')">ğŸ“‹ ã‚³ãƒ”ãƒ¼</button>
                    </div>
                    <div class="result-content" id="lyricsENContent">${generation.lyricsEN}</div>
                </div>
                
                <div class="result-card">
                    <div class="result-header">
                        ğŸ¨ Sunoã‚¹ã‚¿ã‚¤ãƒ«ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ
                        <button class="copy-btn" onclick="copyToClipboard('stylePrompt')">ğŸ“‹ ã‚³ãƒ”ãƒ¼</button>
                    </div>
                    <div class="result-content" id="stylePromptContent">${generation.stylePrompt}</div>
                </div>
                
                <div class="result-card full-width">
                    <div class="result-header">
                        ğŸ–¼ï¸ Midjourneyç”»åƒãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ
                        <button class="copy-btn" onclick="copyToClipboard('midjourneyPrompt')">ğŸ“‹ ã‚³ãƒ”ãƒ¼</button>
                    </div>
                    <div class="midjourney-controls">
                        <div class="control-group">
                            <label>æ¯”ç‡:</label>
                            <select id="aspectRatio" onchange="updateMidjourneyPrompt()">
                                <option value="1:1">1:1 (æ­£æ–¹å½¢)</option>
                                <option value="9:16">9:16 (ç¸¦é•·)</option>
                                <option value="16:9">16:9 (æ¨ªé•·)</option>
                            </select>
                        </div>
                        <div class="control-group">
                            <label>ãƒ¢ãƒ‡ãƒ«:</label>
                            <select id="mjModel" onchange="updateMidjourneyPrompt()">
                                <option value="v7">v7</option>
                                <option value="niji6">niji6</option>
                            </select>
                        </div>
                    </div>
                    <div class="result-content" id="midjourneyPromptContent">${generation.midjourneyPrompt} --ar 1:1 --${initialModel}</div>
                </div>
            `;
        }
        
        // Midjourneyãƒ—ãƒ­ãƒ³ãƒ—ãƒˆæ›´æ–°
        function updateMidjourneyPrompt() {
            if (!currentGeneration) return;
            
            const aspectRatio = document.getElementById('aspectRatio').value;
            const model = document.getElementById('mjModel').value;
            const basePrompt = currentGeneration.midjourneyPrompt;
            
            // ãƒ¢ãƒ‡ãƒ«åã«ã‚¹ãƒšãƒ¼ã‚¹ã‚’è¿½åŠ 
            const formattedModel = model === 'v7' ? 'v 7' : model === 'niji6' ? 'niji 6' : model;
            const updatedPrompt = `${basePrompt} --ar ${aspectRatio} --${formattedModel}`;
            document.getElementById('midjourneyPromptContent').textContent = updatedPrompt;
            
            // ç¾åœ¨ã®ç”Ÿæˆãƒ‡ãƒ¼ã‚¿ã‚‚æ›´æ–°
            currentGeneration.aspectRatio = aspectRatio;
            currentGeneration.model = model;
        }
        
        // ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼
        function copyToClipboard(type) {
            if (!currentGeneration) return;
            
            let text = '';
            switch(type) {
                case 'title':
                    text = currentGeneration.title;
                    break;
                case 'lyricsJP':
                    text = currentGeneration.lyricsJP;
                    break;
                case 'lyricsEN':
                    text = currentGeneration.lyricsEN;
                    break;
                case 'stylePrompt':
                    text = currentGeneration.stylePrompt;
                    break;
                case 'midjourneyPrompt':
                    const aspectRatio = document.getElementById('aspectRatio')?.value || '1:1';
                    const model = document.getElementById('mjModel')?.value || 'v7';
                    // ãƒ¢ãƒ‡ãƒ«åã«ã‚¹ãƒšãƒ¼ã‚¹ã‚’è¿½åŠ 
                    const formattedModel = model === 'v7' ? 'v 7' : model === 'niji6' ? 'niji 6' : model;
                    text = `${currentGeneration.midjourneyPrompt} --ar ${aspectRatio} --${formattedModel}`;
                    break;
            }
            
            navigator.clipboard.writeText(text).then(() => {
                showCopySuccess();
            }).catch(() => {
                // ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯
                const textArea = document.createElement('textarea');
                textArea.value = text;
                document.body.appendChild(textArea);
                textArea.select();
                document.execCommand('copy');
                document.body.removeChild(textArea);
                showCopySuccess();
            });
        }
        
        // ã‚³ãƒ”ãƒ¼æˆåŠŸè¡¨ç¤º
        function showCopySuccess() {
            const indicator = document.getElementById('savedIndicator');
            indicator.textContent = 'ğŸ“‹ ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸï¼';
            indicator.classList.add('show');
            setTimeout(() => {
                indicator.classList.remove('show');
            }, 2000);
        }
        
        // è‡ªå‹•ä¿å­˜è¡¨ç¤º
        function showSavedIndicator() {
            const indicator = document.getElementById('savedIndicator');
            indicator.textContent = 'ğŸ’¾ è‡ªå‹•ä¿å­˜ã•ã‚Œã¾ã—ãŸ';
            indicator.classList.add('show');
            setTimeout(() => {
                indicator.classList.remove('show');
            }, 2000);
        }
        
        // å±¥æ­´ä¿å­˜
        function saveToHistory(generation) {
            let history = JSON.parse(localStorage.getItem('sunoHistory') || '[]');
            history.unshift(generation);
            history = history.slice(0, 10); // æœ€æ–°10ä»¶ã®ã¿ä¿æŒ
            localStorage.setItem('sunoHistory', JSON.stringify(history));
            loadHistory();
        }
        
        // å±¥æ­´èª­ã¿è¾¼ã¿
        function loadHistory() {
            const history = JSON.parse(localStorage.getItem('sunoHistory') || '[]');
            const historyList = document.getElementById('historyList');
            
            if (history.length === 0) {
                historyList.innerHTML = '<p style="color: #666; text-align: center; padding: 20px;">ã¾ã å±¥æ­´ãŒã‚ã‚Šã¾ã›ã‚“</p>';
                return;
            }
            
            historyList.innerHTML = history.map((item, index) => `
                <div class="history-item" onclick="loadFromHistory(${index})">
                    <div class="history-meta">${item.timestamp} - ${item.theme.concept}</div>
                    <div><strong>ğŸµ ${item.title}</strong></div>
                </div>
            `).join('');
        }
        
        // å±¥æ­´ã‹ã‚‰èª­ã¿è¾¼ã¿
        function loadFromHistory(index) {
            const history = JSON.parse(localStorage.getItem('sunoHistory') || '[]');
            const item = history[index];
            if (!item) return;
            
            currentGeneration = item;
            document.getElementById('themeText').textContent = `ğŸ¯ ${item.theme.concept} (${item.theme.keywords})`;
            displayResults(item);
        }
        
        // ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã«å±¥æ­´ã‚’è¡¨ç¤º
        window.addEventListener('load', () => {
            loadHistory();
            // æœ€æ–°ã®å±¥æ­´ãŒã‚ã‚Œã°è‡ªå‹•çš„ã«è¡¨ç¤º
            const history = JSON.parse(localStorage.getItem('sunoHistory') || '[]');
            if (history.length > 0) {
                loadFromHistory(0);
            }
        });
        
        // ãƒšãƒ¼ã‚¸ã‚’é›¢ã‚Œã‚‹å‰ã«è‡ªå‹•ä¿å­˜
        window.addEventListener('beforeunload', () => {
            if (currentGeneration) {
                localStorage.setItem('currentGeneration', JSON.stringify(currentGeneration));
            }
        });
        
        // ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã«å‰å›ã®ãƒ‡ãƒ¼ã‚¿ã‚’å¾©å…ƒ
        window.addEventListener('load', () => {
            const saved = localStorage.getItem('currentGeneration');
            if (saved) {
                try {
                    currentGeneration = JSON.parse(saved);
                    if (currentGeneration.theme) {
                        document.getElementById('themeText').textContent = `ğŸ¯ ${currentGeneration.theme.concept} (${currentGeneration.theme.keywords})`;
                        displayResults(currentGeneration);
                    }
                } catch (e) {
                    console.log('ä¿å­˜ãƒ‡ãƒ¼ã‚¿ã®å¾©å…ƒã«å¤±æ•—ã—ã¾ã—ãŸ');
                }
            }
        });
    </script>
</body>
</html>